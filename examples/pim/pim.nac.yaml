iosxe:
  devices:
    - name: Router1
      host: 10.1.1.1
      configuration:
        system:
          ip_multicast_routing: true
        vrfs:
          - name: MULTICAST_VRF
            address_family_ipv4:
              enable: true
        interfaces:
          loopbacks:
            - id: 101
              description: "PIM Register Source - Global"
              ipv4:
                address: 10.101.101.1
                address_mask: 255.255.255.255
              pim:
                sparse_mode: true
            - id: 201
              description: "PIM Register Source - VRF"
              vrf_forwarding: MULTICAST_VRF
              ipv4:
                address: 10.201.201.1
                address_mask: 255.255.255.255
              pim:
                sparse_mode: true
        pim:
          # Global PIM configuration
          autorp: true
          autorp_listener: true
          register_source_interface_type: Loopback
          register_source_interface_id: "101"
          ssm_range: "10"
          ssm_default: false
          rp_address: 10.10.10.10
          rp_address_override: true
          # VRF-specific PIM configuration
          vrfs:
            - vrf: MULTICAST_VRF
              autorp: true
              autorp_listener: false
              register_source_interface_type: Loopback
              register_source_interface_id: "201"
              ssm_range: "20"
              ssm_default: false
              rp_address: 10.20.20.20

